# WSN-Fault-Diagnosis-Dataset
The dataset is built upon raw data gathered from a network of mobile sniffer nodes.
# 车位检测器心跳--0x02

## 工作流程

VD节点每隔一定时间主动向FES发送一次心跳数据，包括车位状态、温度、磁信号值、电池电压、电池剩余电量等。建议的心跳发送周期为30分钟，可以由FES在运行时更改。
    AP收到心跳数据需发送应答消息，VD节点等待该应答以便确认处于网络中正常通信状态。FES可以不发送本消息对应的应答。

# VD指令--0x02

# 报警数据--0x22

## 工作流程

VD/RP/AP节点在周期性进行外设自检时发现故障，如传感器故障、存储器故障等，主动向FES发送本数据包报告故障情况。
    本通信数据定义中包含所有子硬件模块，如果不存在该模块，值总为0，FES处理时应根据节点类型忽略该域。例如VD没有存储器2，则flash2恒为0。
    FES接收到报警数据包后须向源节点发送应答数据包，VD/RP/AP节点在超时未收到应答数据包应进行重传直到收到应答或达到最大重传次数。

VD/RP/AP指令--0x22

# FES应答--0xA2

| 字段/域 | 字节数 | 类型 | 个数 | 内容 | 说明 |

| --- | --- | --- | --- | --- | --- |

| op | 1 | uint8 | 1 | 0x02 | 命令字 |

| tstamp | 6 | BCD | 6 | 0x16 0x01 0x02 0x03 0x04 0x05 | 时间戳，VD生成数据时的本地时间。例如16 01 02 03 04 05表示2016年1月2日3时4分5秒。 |

| status | 1 | uint8 | 1 | {0,1,2,3} | 车位当前状态。0:无车，1:有车，2:等待激活，3:初始化中。 |

| temperature | 1 | int8 | 1 | -10 | 当时温度值，以1℃为单位。例如-10表示-10℃。 |

| seqno | 1 | uint8 | 1 | 1 | 消息序列号。 |

| magnetic | 6 | int16 | 3 |  | 当时3轴磁场X/Y/Z采样数据。 |

| batVoltage | 1 | uint8 | 1 | 33 | 电池电压，以0.1V为单位。例如33表示电压3.3V。 |

| batQuantity | 1 | uint8 | 1 | 56 | 电池剩余电量，以百分比表示。例如56表示剩余56%的电量。 |

| parent | 8 | BCD | 8 | 0x00 0x00 0x02 0xCA 0x16 0x04 0x00 0x03 | 当前选择的父节点（RP或AP）的MAC地址，用于FES分析形成当前网络拓扑和数据传输路径。 VD为AP的一跳邻居节点时是AP的MAC地址，否则是RP的MAC地址。 |

| recvRSSI | 1 | int8 | 1 |  | VD接收到父节点向其发送消息的平均信号强度，以dbm为单位。 |

| recvLQI | 1 | int8 | 1 |  | VD接收到父节点向其发送消息的平均信道质量指示LQI。界面显示原始值。 |

| sendRSSI | 1 | int8 | 1 |  | 父节点接收到此心跳消息的信号强度，由父节点转发此消息前填充。以dbm为单位。 |

| sendLQI | 1 | int8 | 1 |  | 父节点接收到此心跳消息的信道质量指示，由父节点转发此消息前填充。界面显示原始值。 |

| 字段/域 | 字节数 | 类型 | 个数 | 内容 | 说明 |

| --- | --- | --- | --- | --- | --- |

| op | 1 | uint8 | 1 | 0x22 | 命令字 |

| tstamp | 6 | BCD | 6 | 0x16 0x01 0x02 0x03 0x04 0x05 | 时间戳，VD/RP/AP节点生成数据时的本地时间。例如16 01 02 03 04 05表示2016年1月2日3时4分5秒。 |

| seqno | 1 | uint8 | 1 | 0x01 | 消息序列号 |

| radio | 1 | uint8 | 1 | {0,1} | 射频故障代码。0:正常，1:信号差。 |

| sensor1 | 1 | uint8 | 1 | {0-2} | 磁传感器1故障代码。0:正常，1:无法采样，2:过饱和。 |

| sensor2 | 1 | uint8 | 1 | {0-2} | 磁传感器2故障代码。0:正常，1:无法采样，2:过饱和。 |

| flash1 | 1 | uint8 | 1 | {0-2} | 存储器1故障代码。0:正常，1:无法读写，2:已写满。 |

| flash2 | 1 | uint8 | 1 | {0-2} | 存储器2故障代码。0:正常，1:无法读写，2:已写满。 |

| rtc | 1 | uint8 | 1 | {0-2} | RTC故障代码。0:正常，1:无法走时，2:走时偏差大。 |

| battery | 1 | uint8 | 1 | {0,1} | 电池故障代码。0:正常，1:电池电压低。 |

| solarBat | 1 | uint8 | 1 | {0,1} | 太阳能电池故障代码。0:正常，1:电池电压低。 |

| parent | 8 | BCD | 8 | 0x00 0x00 0x02 0xCA 0x16 0x04 0x00 0x03 | 当前选择的父节点（RP或AP）的MAC地址，用于FES分析形成当前网络拓扑和数据传输路径。 RP为AP的一跳邻居节点时是AP的MAC地址，否则是RP的MAC地址。 |

| 字段/域 | 字节数 | 类型 | 个数 | 内容 | 说明 |

| --- | --- | --- | --- | --- | --- |

| op | 1 | uint8 | 1 | 0xA2 | 命令字 |

| tstamp | 6 | BCD | 6 | 0x16 0x01 0x02 0x03 0x04 0x05 | 时间戳，应与命令/请求的同名域相同。 |
